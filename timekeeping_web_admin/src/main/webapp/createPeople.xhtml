<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta charset="utf-8" name="viewport"
          content="width=device-width, initial-scale=1"
          http-equiv="X-UA-Conpatible"/>
    <h:outputStylesheet library="css" name="bootstrap.min.css"/>
    <h:outputStylesheet library="css" name="app.css"/>
    <title>#{historyCapturedImagesController.title}</title>
    <style type="text/css">
    </style>
</h:head>
<h:body>
    <ui:include src="componentHeader.xhtml"></ui:include>
    <style>
        .prt-dangky-form {
            background: #f1f1f1;
            margin-bottom: 0;
            padding: 30px;
            border-radius: 10px;
        }

        .prt-dangky h2 {
            font-size: 17px;
            color: #000000;
            font-weight: 600;
            text-transform: uppercase;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
        }

        .prt-dangky label {
            color: #4b5563;
            font-size: 14px;
            font-weight: 600;
        }

        .prt-dangky .form-group {
            margin-bottom: 15px;
        }

        .prt-dangky .ui-tabs .ui-tabs-panels .ui-tabs-panel {
            padding-left: 0;
            padding-right: 0;
        }

        .prt-dangky .ui-selectonemenu .ui-selectonemenu-trigger .ui-icon {
            font-size: 10px;
        }

        .prt-dangky .ui-button.ui-button-icon-only .ui-icon {
            font-size: 10px;
        }

        .prt-dangky input {
            height: 37px;
            border-color: #D2D4D7;
            border-top-left-radius: 25px !important;
            border-bottom-left-radius: 25px !important;
            padding-left: 15px !important;
        }

        .prt-dangky .ui-inputgroup button {
            border-top-right-radius: 25px !important;
            border-bottom-right-radius: 25px !important;
        }

        .prt-dangky .ui-fluid .p-datepicker .ui-datepicker-trigger.ui-button {
            border-top-right-radius: 25px !important;
            border-bottom-right-radius: 25px !important;
        }

        .prt-dangky .ui-fluid .ui-calendar input {
            border-radius: 25px !important;
        }

        .prt-dangky .ui-fluid .ui-inputgroup .ui-button-icon-only {
            min-width: 2.5em;
        }

        .prt-dangky .ui-selectonemenu {
            height: 37px;
            border-color: #D2D4D7;
            border-radius: 25px;
            padding-left: 15px !important;
        }

        .prt-dangky .ui-inputgroup .ui-icon {
            margin-top: 0 !important;
            margin-left: 0 !important;
            transform: translate(-50%, -50%) !important;
        }

        .prt-dangky .ui-button-text {

        }

        .prt-dangky .ui-button {
            background-color: #000000;
            border-color: #000000;
        }

        .tt-btn-dang-ky {
            width: 100%;
            border-radius: 25px;
            background-color: #000000;
            border-color: #000000;
            text-transform: uppercase;
        }

        .prt-dangky .ui-tabs.ui-tabs-top > .ui-tabs-nav li.ui-tabs-header.ui-state-active {
            background: #f1f1f1 !important;
        }

        .prt-dangky .ui-tabs.ui-tabs-top > .ui-tabs-nav li.ui-tabs-header.ui-state-active a {
            color: #000;
        }

        .prt-dangky .ui-tabs .ui-tabs-nav li.ui-tabs-header.ui-state-hover {
            background: transparent !important;
        }

        .prt-dangky .ui-tabs .ui-tabs-nav li.ui-tabs-header {
            background: transparent !important;
        }

        .prt-dangky .ui-icon-plusthick {
            position: absolute;
            top: 50%;
            left: 50%;
            margin-top: -9px;
            left: 0.5rem;
            font-size: 12px;
        }

        .prt-image-cn {
            width: 100% !important;
            height: 502px !important;
            object-fit: cover !important;
            border-radius: 10px;
            overflow: hidden;
        }
    </style>
    <div class="container prt-dangky">
        <h:form entctype="multipart/form-data">
            <div class="row pt-3">
                <div class="col-6">
                    <div class="prt-dangky-form">
                        <h2>#{historyCapturedImagesController.title}</h2>
                        <hr style="border-top: 2px solid black;"/>
                        <div class="ui-fluid">
                            <div class="form-group">
                                <p:messages id="msg" showDetail="true" closable="true">
                                    <p:autoUpdate/>
                                </p:messages>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <div class="form-group">
                                        <p:outputLabel styleClass="input-label" value="Khu vực"/>
                                        <p:selectOneMenu value="#{historyCapturedImagesController.zoneSelected}">
                                            <f:selectItem itemLabel="Chọn khu vực" itemValue=""/>
                                            <f:selectItems value="#{historyCapturedImagesController.zone}" var="item"
                                                           itemLabel="#{item.groupName}" itemValue="#{item.groupId}"/>
                                        </p:selectOneMenu>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <p:focus for="inputPeopleId"/>
                                        <p:outputLabel value="Mã nhân viên"/>
                                        <div class="ui-inputgroup">
                                            <p:inputText id="inputPeopleId" placeholder="Nhập hoặc chọn mã nhân viên"
                                                         readonly="#{historyCapturedImagesController.formUpdate}"
                                                         value="#{historyCapturedImagesController.capturedImages.peopleId}"
                                                         autofocus="true"/>
                                            <p:commandButton styleClass="btn btn-default" id="peopleBtn"
                                                             icon="pi pi-search"
                                                             disabled="#{historyCapturedImagesController.formUpdate}"
                                                             update="tbPeople" process="@this inputPeopleId"
                                                             actionListener="#{historyCapturedImagesController.getPeopleListByPeopleId}"/>
                                        </div>
                                        <p:dialog header="Thông tin tìm kiếm" minHeight="500" width="700"
                                                  showEffect="fade" widgetVar="peoplePicker">
                                            <p:dataTable id="tbPeople" var="item"
                                                         value="#{historyCapturedImagesController.peopleList}"
                                                         scrollable="true" scrollHeight="500" selectionMode="single"
                                                         selection="#{historyCapturedImagesController.peopleSelected}"
                                                         rowKey="#{item.peopleId}">
                                                <p:ajax event="rowSelect"
                                                        listener="#{historyCapturedImagesController.onRowSelect}"
                                                        update="@form"/>

                                                <p:column headerText="Mã nhân viên">
                                                    <h:outputText value="#{item.peopleId}"/>
                                                </p:column>
                                                <p:column headerText="Họ tên">
                                                    <h:outputText value="#{item.fullName}"/>
                                                </p:column>
                                                <p:column headerText="Số điện thoại">
                                                    <h:outputText value="#{item.mobilePhone}"/>
                                                </p:column>
                                            </p:dataTable>
                                        </p:dialog>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <div class="form-group">
                                        <p:outputLabel value="Họ và tên"/>
                                        <div class="ui-inputgroup">
                                            <p:inputText id="inputFullName"
                                                         value="#{historyCapturedImagesController.capturedImages.fullName}"/>
                                            <p:commandButton styleClass="btn btn-default" id="fullNameBtn"
                                                             update="tbPeople"
                                                             disabled="#{historyCapturedImagesController.formUpdate}"
                                                             process="@this inputFullName" icon="pi pi-search"
                                                             actionListener="#{historyCapturedImagesController.getPeopleListByFullName}"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <p:outputLabel value="Số điện thoại"/>
                                        <div class="ui-inputgroup">
                                            <p:inputText id="inputMobilePhone"
                                                         value="#{historyCapturedImagesController.capturedImages.mobilePhone}"/>
                                            <p:commandButton styleClass="btn btn-default" id="mobilePhoneBtn"
                                                             update="tbPeople"
                                                             disabled="#{historyCapturedImagesController.formUpdate}"
                                                             process="@this inputMobilePhone" icon="pi pi-search"
                                                             actionListener="#{historyCapturedImagesController.getPeopleListByMobilePhone}"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <div class="form-group">
                                        <p:outputLabel value="Ngày sinh"/>
                                        <!-- <p:inputText value="#{historyCapturedImagesController.capturedImages.dateOfBirth}" type="date"/> -->
                                        <p:datePicker value="#{historyCapturedImagesController.dateSelected}"
                                                      monthNavigator="true" yearNavigator="true" pattern="dd/MM/yyyy"
                                                      yearRange="1930:2010" showIcon="true"/>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-group">
                                        <p:outputLabel value="Giới tính"/>
                                        <p:selectOneMenu id="gender"
                                                         value="#{historyCapturedImagesController.capturedImages.gender}">
                                            <f:selectItem itemLabel="Chọn giới tính" itemValue=""/>
                                            <f:selectItem itemLabel="Nam" itemValue="Nam"/>
                                            <f:selectItem itemLabel="Nữ" itemValue="Nữ"/>
                                            <f:selectItem itemLabel="Không xác định" itemValue="Không xác định"/>
                                        </p:selectOneMenu>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <p:outputLabel value="Phân loại"/>
                                <p:selectOneMenu value="#{historyCapturedImagesController.customerTypeSelected}">
                                    <f:selectItem itemLabel="Chọn phân loại" itemValue=""/>
                                    <f:selectItems value="#{historyCapturedImagesController.customerTypeList}"
                                                   var="item" itemLabel="#{item.customerTypeName}"
                                                   itemValue="#{item.customerTypeId}"/>
                                </p:selectOneMenu>
                            </div>
                        </div>
                        <br/>
                        <div align="center">
                            <h:commandButton update="confirmReg"
                                             styleClass="#{historyCapturedImagesController.formUpdate ? 'btn btn-primary tt-btn-dang-ky' : 'btn btn-success tt-btn-dang-ky'}"
                                             value="#{historyCapturedImagesController.formUpdate ? 'Cập nhật' : 'Đăng ký'}"
                                             ajax="false"
                                             action="#{historyCapturedImagesController.action()}"/>
                            <p:dialog widgetVar="confirmReg" width="500px" modal="true" header="Xác nhận"
                                      resizable="false">
                                <div style="text-align:left;">Mã nhân viên đã được đăng ký. Bạn có chắc chắn muốn đăng ký lại không?</div>
                                <p:commandButton value="Xác nhận"
                                                 actionListener="#{historyCapturedImagesController.reRegister}"
                                                 styleClass="btn btn-secondary btn-sm mr-3"/>

                                <p:commandButton value="Bỏ qua" onclick="PF('confirmReg').hide()"
                                                 styleClass="btn btn-secondary btn-sm"/>
                            </p:dialog>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <p:graphicImage class="prt-image-cn" id="image"
                                    value="#{historyCapturedImagesController.capturedImages.capturedImagePath}"
                                    width="250px" height="250px"/>
                    <p:tooltip id="toolTipContent" for="image" position="bottom">
                        <p:graphicImage value="#{historyCapturedImagesController.capturedImages.capturedImagePath}"/>
                    </p:tooltip>
                </div>
            </div>
        </h:form>
    </div>
</h:body>
</html>